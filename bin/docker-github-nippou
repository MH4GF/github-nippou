#!/bin/sh

if [ -z "$GITHUB_NIPPOU_USER" ]; then
  GITHUB_NIPPOU_USER=$(git config github-nippou.user)
fi

if [ -z "$GITHUB_NIPPOU_ACCESS_TOKEN" ]; then
  GITHUB_NIPPOU_ACCESS_TOKEN=$(git config github-nippou.token)
fi

if [ -z "$GITHUB_NIPPOU_SETTINGS_GIST_ID" ]; then
  GITHUB_NIPPOU_SETTINGS_GIST_ID=$(git config github-nippou.settings-gist-id)
fi

docker run --rm \
  -e GITHUB_NIPPOU_USER=$GITHUB_NIPPOU_USER \
  -e GITHUB_NIPPOU_ACCESS_TOKEN=$GITHUB_NIPPOU_ACCESS_TOKEN \
  -e GITHUB_NIPPOU_SETTINGS_GIST_ID=$GITHUB_NIPPOU_SETTINGS_GIST_ID \
  masutaka/github-nippou:latest $@
